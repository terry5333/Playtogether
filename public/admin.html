<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Admin Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body class="bg-slate-900 text-white p-8">
    <h1 class="text-3xl font-black mb-8">ç®¡ç†å¾Œå° ğŸ›¡ï¸</h1>
    <div class="grid lg:grid-cols-3 gap-8">
        <div class="lg:col-span-2 space-y-4">
            <h2 class="text-slate-500 font-bold uppercase text-xs">æ´»èºæˆ¿é–“</h2>
            <div id="room-list" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </div>
        <div id="profile" class="hidden bg-slate-800 p-6 rounded-3xl">
            <h2 class="text-blue-400 font-bold mb-4">ç©å®¶è©³æƒ…</h2>
            <div id="prof-content"></div>
        </div>
    </div>
    <script>
        const socket = io();
        socket.on('connect', () => socket.emit('admin_init'));
        socket.on('admin_data_update', d => {
            document.getElementById('room-list').innerHTML = d.rooms.map(r => `
                <div class="bg-slate-800 p-5 rounded-3xl border border-slate-700">
                    <div class="flex justify-between items-center mb-4">
                        <span class="font-black text-blue-400">#${r.id}</span>
                        <button onclick="socket.emit('admin_close_room','${r.id}')" class="bg-red-500 text-xs px-2 py-1 rounded">é—œé–‰æˆ¿é–“</button>
                    </div>
                    <div class="space-y-2">
                        ${r.players.map(p => `
                            <div class="flex justify-between text-xs bg-slate-700 p-2 rounded-xl">
                                <span>${p.avatar} ${p.username}</span>
                                <div class="space-x-2">
                                    <button onclick="socket.emit('admin_get_user_profile','${p.username}')" class="text-blue-300">æª”æ¡ˆ</button>
                                    <button onclick="socket.emit('admin_kick_player',{playerId:'${p.id}'})" class="text-orange-400">è¸¢å‡º</button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        });
        socket.on('admin_receive_profile', u => {
            document.getElementById('profile').classList.remove('hidden');
            document.getElementById('prof-content').innerHTML = `
                <div class="text-5xl mb-2">${u.avatar}</div>
                <div class="text-xl font-bold">${u.username}</div>
                <div class="text-yellow-500">ç¸½ç©åˆ†: ${u.score}</div>
            `;
        });
    </script>
</body>
</html>
