<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ç®¡ç†å“¡ä¸Šå¸è¦–è§’</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body class="bg-slate-950 text-white p-10">
    <div class="flex justify-between items-center mb-10">
        <h1 class="text-2xl font-black text-cyan-500 italic">SYSTEM MONITOR</h1>
        <input id="pw" type="password" placeholder="å¯†ç¢¼ 9999" onchange="load()" class="bg-slate-900 border border-slate-700 p-2 rounded-xl outline-none">
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
        <div class="bg-slate-900/50 p-8 rounded-3xl border border-white/5">
            <h2 class="text-xl font-bold mb-6">ğŸ  æ´»èºæˆ¿é–“</h2>
            <div id="r-list" class="space-y-4"></div>
        </div>
        <div class="bg-slate-900/50 p-8 rounded-3xl border border-white/5">
            <h2 class="text-xl font-bold mb-6">ğŸ‘¤ ç©å®¶åå†Šèˆ‡ç©åˆ†</h2>
            <div id="u-list" class="space-y-4"></div>
        </div>
    </div>

    <script>
        const socket = io();
        function load() { socket.emit('admin_login', document.getElementById('pw').value); }
        socket.on('admin_data', data => {
            document.getElementById('r-list').innerHTML = data.rooms.map(r => `
                <div class="flex justify-between bg-black/20 p-4 rounded-2xl">
                    <span>æˆ¿è™Ÿ: ${r.id} (äººæ•¸: ${r.players.length})</span>
                </div>`).join('');
            document.getElementById('u-list').innerHTML = data.users.map(u => `
                <div class="flex justify-between items-center bg-black/20 p-4 rounded-2xl">
                    <span>${u.username} (${u.pin})</span>
                    <div class="flex items-center gap-2">
                        <span class="text-xs text-slate-500">ç©åˆ†:</span>
                        <input type="number" value="${u.score}" onchange="update('${u.pin}', this.value)" class="w-16 bg-cyan-950 text-center border border-cyan-500 rounded text-cyan-400">
                    </div>
                </div>`).join('');
        });
        function update(pin, s) { socket.emit('admin_update_user', {pin, score:s}); }
        setInterval(load, 5000);
    </script>
</body>
</html>
