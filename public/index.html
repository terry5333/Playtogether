<div id="admin-panel" class="hidden glass p-6 rounded-[2rem] border border-yellow-500/20">
    <h4 class="text-[10px] text-yellow-500 mb-4 font-bold uppercase">Admin æ§åˆ¶å°</h4>
    <div class="grid grid-cols-2 gap-3">
        <button onclick="socket.emit('select_mode','SPY')" class="bg-white/5 p-4 rounded-xl text-xs">ğŸ•µï¸ èª°æ˜¯è‡¥åº•</button>
        <button onclick="socket.emit('select_mode','BINGO')" class="bg-white/5 p-4 rounded-xl text-xs">ğŸ”¢ Bingo</button>
        <button onclick="socket.emit('select_mode','GUESS')" class="bg-white/5 p-4 rounded-xl text-xs">âœï¸ ä½ è©±æˆ‘çŒœ</button>
        <button onclick="socket.emit('select_mode','MEMORY')" class="bg-white/5 p-4 rounded-xl text-xs">ğŸ§  è¨˜æ†¶ç¿»ç‰Œ</button>
    </div>
</div>

<div id="cfg-modal" class="hidden fixed inset-0 bg-black/90 z-[200] flex items-center justify-center p-6">
    <div class="glass p-8 rounded-[3rem] w-full max-w-sm">
        <h3 id="cfg-title" class="text-xl font-bold mb-6 text-center"></h3>
        <div id="cfg-body" class="space-y-4 mb-8"></div>
        <button onclick="startFinal()" class="w-full bg-cyan-600 p-4 rounded-2xl font-bold">æ­£å¼é–‹å§‹</button>
    </div>
</div>

<script>
    // æ¥æ”¶æˆ¿ä¸»çš„é¸æ“‡ï¼Œå½ˆå‡ºè¨­å®šè¦–çª—
    socket.on('open_config_ui', (mode) => {
        const modal = document.getElementById('cfg-modal');
        const body = document.getElementById('cfg-body');
        const title = document.getElementById('cfg-title');
        modal.classList.remove('hidden');
        
        if (mode === 'SPY') {
            title.innerText = "èª°æ˜¯è‡¥åº•è¨­å®š";
            body.innerHTML = `<label class="text-xs">ç™¼è¨€ç§’æ•¸</label><input id="val" type="number" value="60" class="w-full bg-white/10 p-4 rounded-xl">`;
        } else if (mode === 'BINGO') {
            title.innerText = "Bingo è¨­å®š";
            body.innerHTML = `<label class="text-xs">ç²å‹é€£ç·šæ•¸</label><input id="val" type="number" value="3" class="w-full bg-white/10 p-4 rounded-xl">`;
        } else if (mode === 'GUESS') {
            title.innerText = "ä½ è©±æˆ‘çŒœè¨­å®š";
            body.innerHTML = `<label class="text-xs">ç¸½å›åˆæ•¸</label><input id="val" type="number" value="3" class="w-full bg-white/10 p-4 rounded-xl">`;
        }
    });

    function startFinal() {
        const val = document.getElementById('val').value;
        const mode = document.getElementById('cfg-title').innerText;
        // æ ¹æ“šä¸åŒæ¨¡å¼å‚³é€ä¸åŒçš„ config ç‰©ä»¶
        let config = {};
        if (mode.includes("è‡¥åº•")) config = { timer: val };
        if (mode.includes("Bingo")) config = { lines: val };
        if (mode.includes("ä½ è©±æˆ‘çŒœ")) config = { rounds: val };
        
        socket.emit('confirm_start', config);
        document.getElementById('cfg-modal').classList.add('hidden');
    }

    socket.on('game_start', (data) => {
        go('v-play');
        // æ ¹æ“š data.type æ¸²æŸ“ä¸åŒçš„éŠæˆ²ç•«é¢ (Bingo å¡«è™Ÿç¢¼ã€èª°æ˜¯è‡¥åº•çœ‹è©èªç­‰)
        renderGameUI(data);
    });
</script>
